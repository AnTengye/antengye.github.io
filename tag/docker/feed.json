{
    "version": "https://jsonfeed.org/version/1",
    "title": "Antengye's Blog • All posts by \"docker\" tag",
    "description": "记录的本质是为了更高效地生活，分享的本质是什么呢？",
    "home_page_url": "https://bigorange.work",
    "items": [
        {
            "id": "https://bigorange.work/p/489377b1/",
            "url": "https://bigorange.work/p/489377b1/",
            "title": "如何成为一名监督帕鲁的服主",
            "date_published": "2024-02-29T13:15:36.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>帕鲁刚推出没多久，就有朋友告诉了我</p>\n<p>咋一看，这不宝可梦吗，作为<s>口袋妖怪</s>宝可梦玩家，果断开玩。</p>\n<p>这不，最近跟朋友们一起玩的帕鲁服务器也已经将近 2000 个游戏日了。</p>\n<p><img src=\"https://gcore.jsdelivr.net/gh/antengye/picgo-db/hexo/202402292123546.png\" alt=\"服务器截图\"></p>\n<p>作为 “腐竹”，为了能够提供给朋友最佳的游戏体验，自然是要好好维护好帕鲁服务器的。</p>\n<p>以下的内容应该可以初步帮助新手腐竹们搭建并管理自己的独立服务器。</p>\n<h2 id=\"服务器的抉择\"><a class=\"markdownIt-Anchor\" href=\"#服务器的抉择\">#</a> 服务器的抉择</h2>\n<p>考虑到有个朋友是晚上 6 点起床，不知道几点睡觉的 “神人”</p>\n<p>所以服务器的就要优先考虑 24 小时运行了。</p>\n<p>一般来说服务器就是考虑两种</p>\n<h3 id=\"公有云服务器\"><a class=\"markdownIt-Anchor\" href=\"#公有云服务器\">#</a> 公有云服务器</h3>\n<p>游戏服务器，可以无脑直接上<a href=\"https://curl.qcloud.com/onNGAwX7\">腾讯云</a>、<a href=\"https://www.aliyun.com/daily-act/ecs/activity_selection?userCode=vipdg4bo\">阿里云</a>等购买即可。</p>\n<p>优点在于，这类服务器可以直接提供一个公共 IP 供朋友直接访问。</p>\n<p>缺点就是服务器的价格摆在那。</p>\n<p>对于新手来说建议用公有云。</p>\n<h3 id=\"私有服务器\"><a class=\"markdownIt-Anchor\" href=\"#私有服务器\">#</a> 私有服务器</h3>\n<p>诸如：自己的电脑、私人服务器等。</p>\n<p>优缺点和上面就是反着来了。</p>\n<p>我自己选择的是用私人服务器 + tailscale 的内网穿透模式。好处是省了一笔费用，坏处是需要一定的动手能力，tailscale 的搭建可以看上一篇文章。</p>\n<h3 id=\"配置\"><a class=\"markdownIt-Anchor\" href=\"#配置\">#</a> 配置</h3>\n<p>至于服务的配置方面，每个游戏的需求量不一样。</p>\n<p>比如帕鲁的服务端资源需求：<a href=\"https://tech.palworldgame.com/getting-started/requirements\">https://tech.palworldgame.com/getting-started/requirements</a></p>\n<p>最低建议是 4 核 8G（预计支撑 3-4 人）。但是帕鲁目前的优化很差，所以还得及时重启，不然会有爆内存的风险。</p>\n<h2 id=\"服务端安装\"><a class=\"markdownIt-Anchor\" href=\"#服务端安装\">#</a> 服务端安装</h2>\n<p>在纠结完服务器后，就可以动手进行服务端的安装了。</p>\n<p>虽然帕鲁官方提供了安装服务端的流程，而且也不算复杂。</p>\n<p>但是考虑到后期可能存在的服务器迁移情况，还是建议用上 docker。</p>\n<h3 id=\"docker\"><a class=\"markdownIt-Anchor\" href=\"#docker\">#</a> Docker</h3>\n<p>简单解释一下 docker 的用处：整合游戏服务器需要的环境，一条命令启动。</p>\n<p>Docker 的安装方式有很多，这里给到 Docker 官方的一键脚本：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -fsSL get.docker.com -o get-docker.sh</span><br><span class=\"line\">sudo sh get-docker.sh --mirror Aliyun</span><br></pre></td></tr></table></figure>\n<h3 id=\"docker-compose\"><a class=\"markdownIt-Anchor\" href=\"#docker-compose\">#</a> Docker-compose</h3>\n<p>Docker-compose 又是干什么的？<s>编排巴拉巴拉的…</s></p>\n<p>其实目前阶段只需要知道，它就是简化 docker 的命令，实现：一条简短的命令启动。</p>\n<p>现在的 docker 安装的时候一般都带上了 Docker-compose</p>\n<p>可以输入命令 <code>docker compose --help</code>  测试下是否有了</p>\n<h3 id=\"部署启动\"><a class=\"markdownIt-Anchor\" href=\"#部署启动\">#</a> 部署 + 启动</h3>\n<p>找一个目录如 <code>server</code> ，创建好一个文件： <code>docker-compose.yml</code></p>\n<p>把下面这段内容填进去</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.9&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">palworld-dedicated-server:</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">palworld-dedicated-server</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">jammsen/palworld-dedicated-server:latest</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">target:</span> <span class=\"number\">8211</span> <span class=\"comment\"># Gamerserver port inside of the container</span></span><br><span class=\"line\">        <span class=\"attr\">published:</span> <span class=\"number\">8211</span> <span class=\"comment\"># Gamerserver port on your host</span></span><br><span class=\"line\">        <span class=\"attr\">protocol:</span> <span class=\"string\">udp</span></span><br><span class=\"line\">        <span class=\"attr\">mode:</span> <span class=\"string\">host</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">target:</span> <span class=\"number\">25575</span> <span class=\"comment\"># RCON port inside of the container</span></span><br><span class=\"line\">        <span class=\"attr\">published:</span> <span class=\"number\">25575</span> <span class=\"comment\"># RCON port on your host</span></span><br><span class=\"line\">        <span class=\"attr\">protocol:</span> <span class=\"string\">tcp</span></span><br><span class=\"line\">        <span class=\"attr\">mode:</span> <span class=\"string\">host</span></span><br><span class=\"line\">    <span class=\"attr\">env_file:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./default.env</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./game:/palworld</span></span><br></pre></td></tr></table></figure>\n<p>现在就可以执行<strong>一条简短的命令启动</strong>： <code>docker compose up -d</code></p>\n<p>什么？没启动起来。</p>\n<p>噢，因为有这两个配置的原因</p>\n<pre><code>env_file:\n  - ./default.env\nvolumes:\n  - ./game:/palworld\n</code></pre>\n<p>后面解释，先在 <code>docker-compose.yml</code>  同级目录下创建</p>\n<p>default.env 文件，复制粘贴进去。</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Container-setttings</span></span><br><span class=\"line\"><span class=\"attr\">PUID</span>=<span class=\"number\">1000</span></span><br><span class=\"line\"><span class=\"attr\">PGID</span>=<span class=\"number\">1000</span></span><br><span class=\"line\"><span class=\"attr\">TZ</span>=Europe/Berlin</span><br><span class=\"line\"><span class=\"comment\"># SteamCMD-settings</span></span><br><span class=\"line\"><span class=\"attr\">ALWAYS_UPDATE_ON_START</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">STEAMCMD_VALIDATE_FILES</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\"># Backup-settings</span></span><br><span class=\"line\"><span class=\"attr\">BACKUP_ENABLED</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">BACKUP_CRON_EXPRESSION</span>=<span class=\"number\">0</span> * * * *</span><br><span class=\"line\"><span class=\"attr\">BACKUP_RETENTION_POLICY</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">BACKUP_RETENTION_AMOUNT_TO_KEEP</span>=<span class=\"number\">72</span></span><br><span class=\"line\"><span class=\"comment\"># Restart-settings</span></span><br><span class=\"line\"><span class=\"attr\">RESTART_ENABLED</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">RESTART_DEBUG_OVERRIDE</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">RESTART_CRON_EXPRESSION</span>=<span class=\"string\">&quot;0 18 * * *&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># RCON-Playerdection - NEEDS RCON ENABLED!</span></span><br><span class=\"line\"><span class=\"attr\">RCON_PLAYER_DETECTION</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">RCON_PLAYER_DETECTION_STARTUP_DELAY</span>=<span class=\"number\">60</span></span><br><span class=\"line\"><span class=\"attr\">RCON_PLAYER_DETECTION_CHECK_INTERVAL</span>=<span class=\"number\">15</span></span><br><span class=\"line\"><span class=\"comment\"># Webhook-settings</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_ENABLED</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_DEBUG_ENABLED</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_URL</span>=<span class=\"string\">&quot;YOUR-URL-IN-HERE&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_CONTENT_TITLE</span>=<span class=\"string\">&quot;Status update&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_INFO_TITLE</span>=<span class=\"string\">&quot;Info&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_INFO_DESCRIPTION</span>=<span class=\"string\">&quot;This is an info from the server&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_INFO_COLOR</span>=<span class=\"string\">&quot;2849520&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_INSTALL_TITLE</span>=<span class=\"string\">&quot;Installing server&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_INSTALL_DESCRIPTION</span>=<span class=\"string\">&quot;Server is being installed&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_INSTALL_COLOR</span>=<span class=\"string\">&quot;2849520&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_RESTART_TITLE</span>=<span class=\"string\">&quot;Server is restarting soon&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_RESTART_DESCRIPTION</span>=<span class=\"string\">&quot;The gameserver is restarting in 15 minutes&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_RESTART_COLOR</span>=<span class=\"string\">&quot;15593515&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_START_TITLE</span>=<span class=\"string\">&quot;Server is starting&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_START_DESCRIPTION</span>=<span class=\"string\">&quot;The gameserver is starting&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_START_COLOR</span>=<span class=\"string\">&quot;2328576&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_STOP_TITLE</span>=<span class=\"string\">&quot;Server has been stopped&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_STOP_DESCRIPTION</span>=<span class=\"string\">&quot;The gameserver has been stopped&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_STOP_COLOR</span>=<span class=\"string\">&quot;7413016&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_UPDATE_TITLE</span>=<span class=\"string\">&quot;Updating server&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_UPDATE_DESCRIPTION</span>=<span class=\"string\">&quot;Server is being updated&quot;</span></span><br><span class=\"line\"><span class=\"attr\">WEBHOOK_UPDATE_COLOR</span>=<span class=\"string\">&quot;2849520&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># Config-setting - Warning: Every setting below here will be affected!</span></span><br><span class=\"line\"><span class=\"attr\">SERVER_SETTINGS_MODE</span>=auto</span><br><span class=\"line\"><span class=\"comment\"># Gameserver-start-settings</span></span><br><span class=\"line\"><span class=\"attr\">MULTITHREAD_ENABLED</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">COMMUNITY_SERVER</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\"># Engine.ini settings</span></span><br><span class=\"line\"><span class=\"attr\">NETSERVERMAXTICKRATE</span>=<span class=\"number\">120</span></span><br><span class=\"line\"><span class=\"comment\"># PalWorldSettings.ini settings</span></span><br><span class=\"line\"><span class=\"attr\">DIFFICULTY</span>=None</span><br><span class=\"line\"><span class=\"attr\">DAYTIME_SPEEDRATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">NIGHTTIME_SPEEDRATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">EXP_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PAL_CAPTURE_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PAL_SPAWN_NUM_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PAL_DAMAGE_RATE_ATTACK</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PAL_DAMAGE_RATE_DEFENSE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PLAYER_DAMAGE_RATE_ATTACK</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PLAYER_DAMAGE_RATE_DEFENSE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PLAYER_STOMACH_DECREASE_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PLAYER_STAMINA_DECREACE_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PLAYER_AUTO_HP_REGENE_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PLAYER_AUTO_HP_REGENE_RATE_IN_SLEEP</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PAL_STOMACH_DECREACE_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PAL_STAMINA_DECREACE_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PAL_AUTO_HP_REGENE_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">PAL_AUTO_HP_REGENE_RATE_IN_SLEEP</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">BUILD_OBJECT_DAMAGE_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">BUILD_OBJECT_DETERIORATION_DAMAGE_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">COLLECTION_DROP_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">COLLECTION_OBJECT_HP_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">COLLECTION_OBJECT_RESPAWN_SPEED_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">ENEMY_DROP_ITEM_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">DEATH_PENALTY</span>=All</span><br><span class=\"line\"><span class=\"attr\">ENABLE_PLAYER_TO_PLAYER_DAMAGE</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">ENABLE_FRIENDLY_FIRE</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">ENABLE_INVADER_ENEMY</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">ACTIVE_UNKO</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">ENABLE_AIM_ASSIST_PAD</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">ENABLE_AIM_ASSIST_KEYBOARD</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">DROP_ITEM_MAX_NUM</span>=<span class=\"number\">3000</span></span><br><span class=\"line\"><span class=\"attr\">DROP_ITEM_MAX_NUM_UNKO</span>=<span class=\"number\">100</span></span><br><span class=\"line\"><span class=\"attr\">BASE_CAMP_MAX_NUM</span>=<span class=\"number\">128</span></span><br><span class=\"line\"><span class=\"attr\">BASE_CAMP_WORKER_MAXNUM</span>=<span class=\"number\">15</span></span><br><span class=\"line\"><span class=\"attr\">DROP_ITEM_ALIVE_MAX_HOURS</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">AUTO_RESET_GUILD_NO_ONLINE_PLAYERS</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">AUTO_RESET_GUILD_TIME_NO_ONLINE_PLAYERS</span>=<span class=\"number\">72.000000</span></span><br><span class=\"line\"><span class=\"attr\">GUILD_PLAYER_MAX_NUM</span>=<span class=\"number\">20</span></span><br><span class=\"line\"><span class=\"attr\">PAL_EGG_DEFAULT_HATCHING_TIME</span>=<span class=\"number\">72.000000</span></span><br><span class=\"line\"><span class=\"attr\">WORK_SPEED_RATE</span>=<span class=\"number\">1.000000</span></span><br><span class=\"line\"><span class=\"attr\">IS_MULTIPLAY</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">IS_PVP</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">CAN_PICKUP_OTHER_GUILD_DEATH_PENALTY_DROP</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">ENABLE_NON_LOGIN_PENALTY</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">ENABLE_FAST_TRAVEL</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">IS_START_LOCATION_SELECT_BY_MAP</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">EXIST_PLAYER_AFTER_LOGOUT</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">ENABLE_DEFENSE_OTHER_GUILD_PLAYER</span>=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">COOP_PLAYER_MAX_NUM</span>=<span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"attr\">MAX_PLAYERS</span>=<span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"attr\">SERVER_NAME</span>=jammsen-docker-generated-<span class=\"comment\">###RANDOM###</span></span><br><span class=\"line\"><span class=\"attr\">SERVER_DESCRIPTION</span>=Palworld-Dedicated-Server running in Docker by jammsen</span><br><span class=\"line\"><span class=\"attr\">ADMIN_PASSWORD</span>=adminPasswordHere</span><br><span class=\"line\"><span class=\"attr\">SERVER_PASSWORD</span>=serverPasswordHere</span><br><span class=\"line\"><span class=\"attr\">PUBLIC_PORT</span>=<span class=\"number\">8211</span></span><br><span class=\"line\"><span class=\"attr\">PUBLIC_IP</span>=</span><br><span class=\"line\"><span class=\"attr\">RCON_ENABLED</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">RCON_PORT</span>=<span class=\"number\">25575</span></span><br><span class=\"line\"><span class=\"attr\">REGION</span>=</span><br><span class=\"line\"><span class=\"attr\">USEAUTH</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">BAN_LIST_URL</span>=https://api.palworldgame.com/api/banlist.txt</span><br><span class=\"line\"><span class=\"attr\">SHOW_PLAYER_LIST</span>=<span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n<p>再创建一个空的 game 目录。</p>\n<p>此时，再次执行命令： <code>docker compose up -d &amp;&amp; docker compose logs -f </code></p>\n<p>观察一下当前日志，初次启动会下载服务端文件比较耗时。</p>\n<p>当看到这样的内容出来，就说启动成功</p>\n<p><img src=\"https://gcore.jsdelivr.net/gh/antengye/picgo-db/hexo/202402291438622.png\" alt=\"帕鲁服务端启动完成\"></p>\n<p>可以按 ctrl+c 结束日志查看。</p>\n<p>完整目录结构如下</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- server</span><br><span class=\"line\">  - docker-compose.yml</span><br><span class=\"line\">  - default.env</span><br><span class=\"line\">  - game</span><br></pre></td></tr></table></figure>\n<p><code>docker compose</code>  相关命令都需要在 <code>server</code>  目录下执行</p>\n<h3 id=\"云服务器策略放行\"><a class=\"markdownIt-Anchor\" href=\"#云服务器策略放行\">#</a> 云服务器策略放行</h3>\n<p>如果你是用云服务器，记得要在控制台的安全组上添加</p>\n<p>8211(<strong>UDP</strong>) 和 25575 (<strong>TCP</strong>)</p>\n<p>两条规则。<strong>注意协议！！！</strong></p>\n<p>附阿里云的添加方法：</p>\n<p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7096051661/p128550.gif\" alt=\"添加安全组规则\"></p>\n<p>附腾讯云的添加方法：</p>\n<p><a href=\"https://cloud.tencent.com/document/product/213/39740\">https://cloud.tencent.com/document/product/213/39740</a></p>\n<p>来源选： <code>IP 地址或 CIDR 段 </code>  填： <code>0.0.0.0/0</code></p>\n<p>协议端口：</p>\n<p>UDP:8211</p>\n<p>TCP:25575</p>\n<p>以上步骤做完，就可以输入 <code>服务器IP:8211</code>  访问这个属于自己服务器了。</p>\n<p><img src=\"https://tech.palworldgame.com/assets/images/connect-1c10ce87f46b3bdad1b46be1b25f0807.jpg\" alt=\"connect\"></p>\n<p>关服命令： <code>docker compose down</code></p>\n<h2 id=\"服务端管理\"><a class=\"markdownIt-Anchor\" href=\"#服务端管理\">#</a> 服务端管理</h2>\n<p>作为腐竹，想要在服务器出现问题时能够快速处理，就需要了解以下几个基础的知识点。</p>\n<p>以下就拿刚刚部署好的 <code>docker-compose.yml</code>  来逐行说明</p>\n<h3 id=\"基础信息\"><a class=\"markdownIt-Anchor\" href=\"#基础信息\">#</a> 基础信息</h3>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.9&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">palworld-dedicated-server:</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">palworld-dedicated-server</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">jammsen/palworld-dedicated-server:latest</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>version：声明这个文件适用的 docker-compose 的版本</p>\n</li>\n<li>\n<p>services: 创建的服务</p>\n</li>\n<li>\n<p>palworld-dedicated-server: 服务名</p>\n</li>\n<li>\n<p>container_name: 该容器的命名，可以自己取。</p>\n</li>\n<li>\n<p>restart：重启策略</p>\n<ul>\n<li>restart: “no” // 不会自动重启</li>\n<li>restart: always // 只要关掉了就会重启</li>\n<li>restart: on-failure // 服务启动失败会重启</li>\n<li>restart: unless-stopped // 除非被手动关闭</li>\n</ul>\n</li>\n<li>\n<p>image：镜像地址</p>\n<ul>\n<li>作为核心。一个将服务端打包好的链接，本次用的是 https://github.com/jammsen/docker-palworld-dedicated-server</li>\n<li>也可以自己制作并打包镜像，这里就不多赘述。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"端口映射\"><a class=\"markdownIt-Anchor\" href=\"#端口映射\">#</a> 端口映射</h3>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">ports:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">target:</span> <span class=\"number\">8211</span> <span class=\"comment\"># Gamerserver port inside of the container</span></span><br><span class=\"line\">    <span class=\"attr\">published:</span> <span class=\"number\">8211</span> <span class=\"comment\"># Gamerserver port on your host</span></span><br><span class=\"line\">    <span class=\"attr\">protocol:</span> <span class=\"string\">udp</span></span><br><span class=\"line\">    <span class=\"attr\">mode:</span> <span class=\"string\">host</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">target:</span> <span class=\"number\">25575</span> <span class=\"comment\"># RCON port inside of the container</span></span><br><span class=\"line\">    <span class=\"attr\">published:</span> <span class=\"number\">25575</span> <span class=\"comment\"># RCON port on your host</span></span><br><span class=\"line\">    <span class=\"attr\">protocol:</span> <span class=\"string\">tcp</span></span><br><span class=\"line\">    <span class=\"attr\">mode:</span> <span class=\"string\">host</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>target</code> : 容器自己本身的端口。镜像不变更的情况下不能改这个\n<ul>\n<li>对于帕鲁服务端来说，默认端口开放在 8211，镜像制作也一般选择 8211</li>\n</ul>\n</li>\n<li><code>published</code> : 对外暴露的端口。也就是你在客户端要连接的时候需要输入的端口号。这个可以自己调整</li>\n<li><code>protocol</code> : 端口的协议。一般服务端都是 UDP 协议，网站一般是 TCP 协议。</li>\n<li><code>mode</code> : 网络模式，有 <code>host</code>  、 <code>bridge</code> 、  <code>none</code>  等这里就不展开了。要深入了解的可以查看文档：<a href=\"https://docs.docker.com/network/drivers/\">https://docs.docker.com/network/drivers/</a></li>\n</ul>\n<h3 id=\"目录映射\"><a class=\"markdownIt-Anchor\" href=\"#目录映射\">#</a> 目录映射</h3>\n<pre><code>env_file:\n  - ./default.env\nvolumes:\n  - ./game:/palworld\n</code></pre>\n<ul>\n<li><code>env_file</code> : 从文件中读取配置作为服务启动后的<strong>环境变量</strong>。</li>\n<li><code>volumes</code> : 挂载文件\n<ul>\n<li>由于 Docker 的便利性，所以在没有挂载文件时，在关闭 docker 服务后，服务中的所有数据都将不复存在（主打一个片叶不沾身）</li>\n<li>因此，为了保存我们的服务端数据，需要将游戏的文件存在我们的机器上。</li>\n<li><code>./game:/palworld</code>  的意思是，将当前目录下的 game 目录挂载到容器中的 /palworld 目录下。（通俗的说就是 game 目录此时等同于 palword 目录）</li>\n<li>此时，docker 服务里面产生游戏数据都会存到 /palworld 目录下，我们也就可以通过 game 目录访问到游戏数据了</li>\n<li>在游戏启动完成后，你可以 cd 到 game 目录下查看是否已经有了游戏文件了</li>\n<li><img src=\"https://gcore.jsdelivr.net/gh/antengye/picgo-db/hexo/202402292131502.png\" alt=\"游戏目录的文件\"></li>\n</ul>\n</li>\n</ul>\n<p>有了这个目录映射后，想要对游戏的配置进行手动变更、对存档进行修改、恢复存档，都可以通过 game 目录来进行操作。</p>\n<p>比如查看服务端配置文件：Pal\\Saved\\Config\\LinuxServer\\PalWorldSettings.ini</p>\n<h3 id=\"资源使用情况\"><a class=\"markdownIt-Anchor\" href=\"#资源使用情况\">#</a> 资源使用情况</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker stats</span><br></pre></td></tr></table></figure>\n<p>通过这个命令，可以查看到帕鲁服务占用的资源，如果占用异常了，就及时进行重启 <code>docker compose restart</code> 。</p>\n<p>如下图第一个就是帕鲁服务器的资源占用情况。这还是已经配置了自动重启后的。<br>\n<img src=\"https://gcore.jsdelivr.net/gh/antengye/picgo-db/hexo/202402281502468.png\" alt=\"帕鲁服务资源占用\"></p>\n<h2 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\">#</a> 总结</h2>\n<p>以上就是帮助各位成为一名合格的监督帕鲁的服主的教程，当然还有很多细节没有介绍到。</p>\n<p>如果有需要，那就另外开坑细讲了。</p>\n",
            "tags": [
                "Docker",
                "game"
            ]
        }
    ]
}